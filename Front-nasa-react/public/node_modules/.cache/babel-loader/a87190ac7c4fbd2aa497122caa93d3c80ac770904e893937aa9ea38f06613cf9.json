{"ast":null,"code":"import _regeneratorRuntime from\"/Users/SergioIglesias/nytype/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/SergioIglesias/nytype/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getSavedList,setList,getSavedListDetails,setListDetails}from\"./storage\";export var getNewYorkBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var books,response,data,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:books=getSavedList();if(!(!books||books.length===0)){_context.next=18;break;}_context.prev=2;_context.next=5;return fetch('https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=KF9ASDfmvWA3uXGbVU3FIPT5iWhQoPsB');case 5:response=_context.sent;console.log({response:response});_context.next=9;return response.json();case 9:data=_context.sent;console.log({data:data});results=data.results;if(results&&results.length>0){setList(results);books=results;}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](2);console.log('Hubo un error');case 18:return _context.abrupt(\"return\",books);case 19:case\"end\":return _context.stop();}},_callee,null,[[2,15]]);}));return function getNewYorkBooks(){return _ref.apply(this,arguments);};}();export var getListDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(listName){var values,response,data,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:values=getSavedListDetails(listName);if(!(!values||values.length===0)){_context2.next=18;break;}_context2.prev=2;_context2.next=5;return fetch(\"https://api.nytimes.com/svc/books/v3/lists/\".concat(listName,\".json?api-key=KF9ASDfmvWA3uXGbVU3FIPT5iWhQoPsB\"));case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:data=_context2.sent;console.log(data);results=data.results.books;setListDetails(listName,results);return _context2.abrupt(\"return\",results);case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](2);console.log('Hubo un error');case 18:return _context2.abrupt(\"return\",values);case 19:case\"end\":return _context2.stop();}},_callee2,null,[[2,15]]);}));return function getListDetails(_x){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["getSavedList","setList","getSavedListDetails","setListDetails","getNewYorkBooks","books","length","fetch","response","console","log","json","data","results","getListDetails","listName","values"],"sources":["/Users/SergioIglesias/nytype/src/services/api.ts"],"sourcesContent":["import { getSavedList, setList, getSavedListDetails, setListDetails } from \"./storage\";\n\nexport type BooksList = {\n    display_name: string\n    list_name: string\n    list_name_encoded: string\n    newest_published_date: string\n    oldest_published_date: string\n    updated: string\n    image_url: string\n}\n\n\n\nexport const getNewYorkBooks = async () => {\n    let books: BooksList[] = getSavedList()\n\n    if (!books || books.length === 0) {\n        try {\n            const response = await fetch('https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=KF9ASDfmvWA3uXGbVU3FIPT5iWhQoPsB')\n            console.log({ response })\n            const data = await response.json()\n            console.log({ data })\n            const results: BooksList[] = data.results\n\n            if (results && results.length > 0) {\n                setList(results)\n                books = results\n            }\n        }\n        catch (error) {\n            console.log('Hubo un error')\n\n        }\n    }\n    return books\n}\n\nexport const getListDetails = async (listName: string) => {\n    let values = getSavedListDetails(listName)\n    if (!values || values.length === 0) {\n    try {\n        const response = await fetch(`https://api.nytimes.com/svc/books/v3/lists/${listName}.json?api-key=KF9ASDfmvWA3uXGbVU3FIPT5iWhQoPsB`)\n        const data = await response.json()\n        console.log(data)\n        const results = data.results.books\n        setListDetails(listName, results)\n        return results\n    }\n    catch (error) {\n        console.log('Hubo un error')\n    }\n}\n\n    return values\n}"],"mappings":"oPAAA,OAASA,YAAY,CAAEC,OAAO,CAAEC,mBAAmB,CAAEC,cAAc,KAAQ,WAAW,CActF,MAAO,IAAMC,gBAAe,4FAAG,oKACvBC,KAAkB,CAAGL,YAAY,EAAE,MAEnC,CAACK,KAAK,EAAIA,KAAK,CAACC,MAAM,GAAK,CAAC,iEAEDC,MAAK,CAAC,gGAAgG,CAAC,QAAxHC,QAAQ,eACdC,OAAO,CAACC,GAAG,CAAC,CAAEF,QAAQ,CAARA,QAAS,CAAC,CAAC,uBACNA,SAAQ,CAACG,IAAI,EAAE,QAA5BC,IAAI,eACVH,OAAO,CAACC,GAAG,CAAC,CAAEE,IAAI,CAAJA,IAAK,CAAC,CAAC,CACfC,OAAoB,CAAGD,IAAI,CAACC,OAAO,CAEzC,GAAIA,OAAO,EAAIA,OAAO,CAACP,MAAM,CAAG,CAAC,CAAE,CAC/BL,OAAO,CAACY,OAAO,CAAC,CAChBR,KAAK,CAAGQ,OAAO,CACnB,CAAC,iFAGDJ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,yCAI7BL,KAAK,sEACf,kBAtBYD,gBAAe,0CAsB3B,CAED,MAAO,IAAMU,eAAc,6FAAG,kBAAOC,QAAgB,wJAC7CC,MAAM,CAAGd,mBAAmB,CAACa,QAAQ,CAAC,MACtC,CAACC,MAAM,EAAIA,MAAM,CAACV,MAAM,GAAK,CAAC,oEAEPC,MAAK,sDAA+CQ,QAAQ,mDAAiD,QAA9HP,QAAQ,uCACKA,SAAQ,CAACG,IAAI,EAAE,QAA5BC,IAAI,gBACVH,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC,CACXC,OAAO,CAAGD,IAAI,CAACC,OAAO,CAACR,KAAK,CAClCF,cAAc,CAACY,QAAQ,CAAEF,OAAO,CAAC,kCAC1BA,OAAO,+DAGdJ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,0CAIzBM,MAAM,wEAChB,kBAjBYF,eAAc,6CAiB1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}